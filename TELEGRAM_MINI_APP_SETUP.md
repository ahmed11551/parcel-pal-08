# ü§ñ –°–æ–∑–¥–∞–Ω–∏–µ Telegram Mini App –¥–ª—è SendBuddy

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `SendBuddy`)
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `sendbuddy_bot`)
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

**–í–∞–∂–Ω–æ:** –¢–æ–∫–µ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Mini App!

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App —á–µ—Ä–µ–∑ @BotFather

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather –∫–æ–º–∞–Ω–¥—É `/newapp`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `SendBuddy`
4. –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `P2P –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ—Å—ã–ª–æ–∫`
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É (512x512px, PNG)
6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ (640x360px, JPG/PNG)
7. –í–≤–µ–¥–∏—Ç–µ **Web App URL**: 
   ```
   https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app
   ```
   –ò–ª–∏ –µ—Å–ª–∏ –¥–æ–º–µ–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
   ```
   https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
   ```

8. –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è: `sendbuddy` (–ª–∞—Ç–∏–Ω–∏—Ü–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
9. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ **App ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1234567890`)

---

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –±–æ—Ç–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather –∫–æ–º–∞–Ω–¥—É `/mybots`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ **Bot Settings** ‚Üí **Menu Button**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Configure Menu Button**
5. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: `–û—Ç–∫—Ä—ã—Ç—å SendBuddy`
6. –í–≤–µ–¥–∏—Ç–µ URL: `https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app` (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)

–¢–µ–ø–µ—Ä—å –≤ –±–æ—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App!

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ

–ü—Ä–æ–µ–∫—Ç —É–∂–µ –∏–º–µ–µ—Ç –±–∞–∑–æ–≤—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É Telegram Mini App:

**–§–∞–π–ª—ã:**
- `src/lib/telegram.ts` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è Telegram
- `src/hooks/useMiniApp.ts` - —Ö—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Mini App
- `src/contexts/AuthContext.tsx` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `index.html` –µ—Å—Ç—å:**
```html
<script src="https://telegram.org/js/telegram-web-app.js"></script>
```

---

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –í Vercel (Environment Variables):

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Vercel
2. **Settings** ‚Üí **Environment Variables**
3. –î–æ–±–∞–≤—å—Ç–µ:
   ```
   VITE_TELEGRAM_BOT_USERNAME=sendbuddy_bot
   ```

#### –ù–∞ Backend (`.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
TELEGRAM_BOT_USERNAME=sendbuddy_bot
```

---

### –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend –¥–ª—è Telegram Auth

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:

**–§–∞–π–ª:** `backend/src/auth/auth.service.ts`

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ—Ç–æ–¥ `verifySocial` –¥–ª—è Telegram.

---

### –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@sendbuddy_bot`)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`)
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å SendBuddy"
5. Mini App –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è!

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã Mini App

–í `src/lib/telegram.ts` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```typescript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã
if (window.Telegram?.WebApp) {
  const tg = window.Telegram.WebApp;
  tg.ready();
  tg.expand();
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤
  tg.setHeaderColor('#your-color');
  tg.setBackgroundColor('#your-color');
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

```typescript
// –ó–∞–∫—Ä—ã—Ç–∏–µ Mini App
tg.close();

// –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
tg.MainButton.setText('–û–ø–ª–∞—Ç–∏—Ç—å');
tg.MainButton.show();
tg.MainButton.onClick(() => {
  // –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
});
```

---

## üì± –§—É–Ω–∫—Ü–∏–∏ Mini App

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Mini App –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Telegram –∞–∫–∫–∞—É–Ω—Ç.

**–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤:**
- `src/contexts/AuthContext.tsx` - –º–µ—Ç–æ–¥ `handleMiniAppAuth`

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```typescript
const tg = window.Telegram.WebApp;
const user = tg.initDataUnsafe?.user;

// user —Å–æ–¥–µ—Ä–∂–∏—Ç:
// - id: Telegram ID
// - first_name: –ò–º—è
// - last_name: –§–∞–º–∏–ª–∏—è
// - username: Username
// - photo_url: –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
```

---

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –¶–≤–µ—Ç–∞

```typescript
tg.setHeaderColor('#your-header-color');
tg.setBackgroundColor('#your-bg-color');
```

### –ö–Ω–æ–ø–∫–∏

```typescript
// –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞
tg.MainButton.setText('–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ');
tg.MainButton.show();
tg.MainButton.onClick(() => {
  // –î–µ–π—Å—Ç–≤–∏–µ
});

// –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
tg.BackButton.show();
tg.BackButton.onClick(() => {
  // –î–µ–π—Å—Ç–≤–∏–µ
});
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram

**–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Telegram –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

Backend –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å `initData` —á–µ—Ä–µ–∑ Telegram API.

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```typescript
// –ù–∞ backend
const crypto = require('crypto');

function validateTelegramData(initData: string, botToken: string) {
  const urlParams = new URLSearchParams(initData);
  const hash = urlParams.get('hash');
  urlParams.delete('hash');
  
  const dataCheckString = Array.from(urlParams.entries())
    .sort(([a], [b]) => a.localeCompare(b))
    .map(([key, value]) => `${key}=${value}`)
    .join('\n');
  
  const secretKey = crypto
    .createHmac('sha256', 'WebAppData')
    .update(botToken)
    .digest();
  
  const calculatedHash = crypto
    .createHmac('sha256', secretKey)
    .update(dataCheckString)
    .digest('hex');
  
  return calculatedHash === hash;
}
```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –≤ Telegram
tg.sendData(JSON.stringify({
  event: 'task_created',
  taskId: '123'
}));
```

### –ú–µ—Ç—Ä–∏–∫–∏

Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–∏–π
- –í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ–Ω–≤–µ—Ä—Å–∏–∏

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:**
   - URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ @BotFather
   - –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools –≤ Mini App
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç–æ–¥ `verifySocial` –≤ `auth.service.ts`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend

### –û—à–∏–±–∫–∞ "Invalid domain"

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –°–æ–∑–¥–∞–Ω –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- [ ] –°–æ–∑–¥–∞–Ω Mini App —á–µ—Ä–µ–∑ @BotFather
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é –±–æ—Ç–∞
- [ ] URL Mini App —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –î–æ–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ HTTPS
- [ ] `TELEGRAM_BOT_TOKEN` –¥–æ–±–∞–≤–ª–µ–Ω –≤ backend `.env`
- [ ] Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à Telegram Mini App –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
3. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–º–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É –±–æ—Ç–∞

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Telegram Bot API:** https://core.telegram.org/bots/api
- **Telegram Mini Apps:** https://core.telegram.org/bots/webapps
- **BotFather:** https://t.me/BotFather
- **–ü—Ä–∏–º–µ—Ä—ã:** https://github.com/telegram-mini-apps

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–º–µ–Ω:** Mini App –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É:** Mini App –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –≤–µ—Ä—Å–∏—è—Ö Telegram

---

**–£–¥–∞—á–∏ —Å –≤–∞—à–∏–º Mini App!** üöÄ

