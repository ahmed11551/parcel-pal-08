# üóëÔ∏è –õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

**–ö–æ–≥–¥–∞ –∑–∞–¥–∞–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `delivered` (–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞–Ω–∏—è –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `delivered`
2. –ü–æ–ª–µ `deleted_at` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É/–≤—Ä–µ–º—è
3. –ó–∞–¥–∞–Ω–∏–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π)
4. –ó–∞–¥–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –ë–î –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

**–ì–¥–µ –∑–∞–¥–∞–Ω–∏—è —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è:**
- ‚úÖ `GET /api/tasks` - –ø—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π (—É–¥–∞–ª–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
- ‚úÖ `GET /api/tasks/my` - –º–æ–∏ –∑–∞–¥–∞–Ω–∏—è (—É–¥–∞–ª–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ì–¥–µ –∑–∞–¥–∞–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏:**
- ‚úÖ `GET /api/tasks/:id` - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏–ª–∏ –∫—É—Ä—å–µ—Ä–æ–º, –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–µ —É–¥–∞–ª–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ

---

## –î–æ—Å—Ç—É–ø –∫ —É–¥–∞–ª–µ–Ω–Ω—ã–º –∑–∞–¥–∞–Ω–∏—è–º

### –ü—Ä–æ—Å–º–æ—Ç—Ä —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –≤ "–ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è":

```bash
GET /api/tasks/my?includeDeleted=true
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤–∫–ª—é—á–∞—è —É–¥–∞–ª–µ–Ω–Ω—ã–µ (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏).

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ü–æ–ª–µ –≤ –ë–î:
- `deleted_at TIMESTAMP` - NULL –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–µ–Ω–æ, timestamp –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–æ

### –õ–æ–≥–∏–∫–∞:
1. –ü—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `delivered` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ `deleted_at = CURRENT_TIMESTAMP`
2. –í –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ `AND t.deleted_at IS NULL`
3. –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞–Ω–∏—è - —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–æ—Å—Ç—É–ø –≤–ª–∞–¥–µ–ª—å—Ü—É/–∫—É—Ä—å–µ—Ä—É –¥–∞–∂–µ –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–æ

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è:

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ (–Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ)
- –ò–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
- –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- –ú–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

---

## –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏–∑ –ë–î, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É cron:

```sql
-- –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã–µ –±–æ–ª–µ–µ 30 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
DELETE FROM tasks WHERE deleted_at IS NOT NULL AND deleted_at < NOW() - INTERVAL '30 days';
```

–ù–æ —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –∏ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏!

---

## –°—Ç–∞—Ç—É—Å: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–ó–∞–¥–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è (–º—è–≥–∫–æ) –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–æ–≤.

