# Telegram Mini App Implementation Checklist

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Telegram Mini App.

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ **–ë–æ—Ç —Å–æ–∑–¥–∞–Ω**: @SendBuddyExpress_Bot
- ‚úÖ **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞**: `<script src="https://telegram.org/js/telegram-web-app.js"></script>` –≤ `index.html`
- ‚úÖ **HTTPS**: –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ HTTPS (send-buddy.ru)
- ‚ö†Ô∏è **–¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**: –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Mini App

- ‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: `Telegram.WebApp.ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `initTelegramWebApp()`
- ‚úÖ **Expand**: `Telegram.WebApp.expand()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- ‚úÖ **–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–º—ã**: `applyTelegramTheme()` –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç —Ü–≤–µ—Ç–∞ Telegram
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: `getTelegramInitData()` –∏ `getTelegramUser()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ **BackButton**: `setupTelegramBackButton()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ **MainButton**: `setupTelegramMainButton()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript –¥–ª—è Telegram WebApp API

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- ‚úÖ **HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `backend/src/utils/telegram.ts`
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ auth_date**: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á `HMAC_SHA256(bot_token, "WebAppData")`

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

- ‚úÖ **–ö–Ω–æ–ø–∫–∏ –≤ –±–æ—Ç–µ**: –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å SendBuddy" –≤ `/start` –∫–æ–º–∞–Ω–¥–µ
- ‚úÖ **Mini App URL**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ `telegram-bot/src/commands/start.ts`
- ‚úÖ **–ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ initData

---

## ‚ö†Ô∏è –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–∫—Ä–∏—Ç–∏—á–Ω–æ)

**–ü—Ä–æ–±–ª–µ–º–∞**: `ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `telegram.ts` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ React —Ä–µ–Ω–¥–µ—Ä–∞.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
// src/lib/telegram.ts:192-203
if (typeof window !== 'undefined') {
  if (isTelegramWebApp()) {
    const tg = initTelegramWebApp();
    if (tg) {
      applyTelegramTheme();
      tg.onEvent('themeChanged', applyTelegramTheme);
    }
  }
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –≠—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏.

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

- ‚ö†Ô∏è **User-Agent –ø—Ä–æ–≤–µ—Ä–∫–∞**: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚ö†Ô∏è **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ LOW/AVERAGE/HIGH**: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- ‚ö†Ô∏è **CloudStorage**: –¢–∏–ø–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ö†Ô∏è **BiometricManager**: –¢–∏–ø–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ö†Ô∏è **HapticFeedback**: –¢–∏–ø–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- ‚ö†Ô∏è **–¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä**: –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚ö†Ô∏è **–û—Ç–ª–∞–¥–∫–∞**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ç–ª–∞–¥–∫–µ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –£–ª—É—á—à–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ React:

```html
<!-- –í index.html –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º -->
<script>
  if (window.Telegram && window.Telegram.WebApp) {
    window.Telegram.WebApp.ready();
    window.Telegram.WebApp.expand();
  }
</script>
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```typescript
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
export const getDevicePerformance = (): 'LOW' | 'AVERAGE' | 'HIGH' => {
  if (!isTelegramWebApp()) return 'AVERAGE';
  
  const ua = navigator.userAgent;
  // Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —É–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ User-Agent
  if (ua.includes('LOW')) return 'LOW';
  if (ua.includes('HIGH')) return 'HIGH';
  return 'AVERAGE';
};
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CloudStorage –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CloudStorage
export const saveToCloudStorage = (key: string, value: string) => {
  if (isTelegramWebApp()) {
    window.Telegram!.WebApp.CloudStorage.setItem(key, value, (error, success) => {
      if (error) {
        console.error('CloudStorage error:', error);
      }
    });
  }
};
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

- [x] –ë–æ—Ç —Å–æ–∑–¥–∞–Ω –∏ —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
- [x] –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ telegram-web-app.js –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [x] WebApp.ready() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- [x] WebApp.expand() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è initData –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [x] –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–º—ã Telegram
- [x] HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] URL Mini App —É–∫–∞–∑–∞–Ω –≤ BotFather

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CloudStorage –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- [ ] HapticFeedback –¥–ª—è UX
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ—Ç–ª–∞–¥–∫–µ

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

- [ ] –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars
- [ ] –ü–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã BotFather

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Mini App –≤ BotFather:

```
/mybots
‚Üí –í—ã–±–µ—Ä–∏—Ç–µ @SendBuddyExpress_Bot
‚Üí Bot Settings
‚Üí Menu Button
‚Üí –£–∫–∞–∂–∏—Ç–µ URL: https://send-buddy.ru
```

–ò–ª–∏ —á–µ—Ä–µ–∑ API:

```bash
curl -X POST "https://api.telegram.org/bot<TOKEN>/setChatMenuButton" \
  -H "Content-Type: application/json" \
  -d '{
    "menu_button": {
      "type": "web_app",
      "text": "–û—Ç–∫—Ä—ã—Ç—å SendBuddy",
      "web_app": {
        "url": "https://send-buddy.ru"
      }
    }
  }'
```

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É: 85%**

- ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: ‚úÖ –î–ê**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Telegram WebApp API.

