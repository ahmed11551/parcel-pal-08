# üîî –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:

### 1. –í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è?

**–í –±–æ—Ç–µ:**
```
/start
‚Üí –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è):

```
/test_notification
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à—É –ø–æ–¥–ø–∏—Å–∫—É
- –ü–æ–∫–∞–∂–µ—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ SQL (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É
docker compose exec postgres psql -U sendbuddy -d sendbuddy -c "
SELECT 
  tu.telegram_id,
  tu.first_name,
  tu.subscribed,
  ts.active as subscription_active
FROM telegram_users tu
LEFT JOIN telegram_subscriptions ts ON tu.telegram_id = ts.telegram_id
WHERE tu.telegram_id = 8401704531;
"

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
docker compose exec postgres psql -U sendbuddy -d sendbuddy -c "
INSERT INTO telegram_notifications (telegram_id, type, title, message)
VALUES (
  8401704531,
  'new_task',
  'üß™ –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
  '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –µ–≥–æ, –∑–Ω–∞—á–∏—Ç —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.'
);
"

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–ª–æ—Å—å
docker compose exec postgres psql -U sendbuddy -d sendbuddy -c "
SELECT * FROM telegram_notifications 
WHERE telegram_id = 8401704531 
ORDER BY created_at DESC 
LIMIT 5;
"

# 4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
sleep 30
docker compose logs telegram-bot --tail=50 | grep -i notification
```

---

## ‚öôÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:

```bash
cd /root/parcel-pal-08

# –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –±–æ—Ç–∞ –∏ backend
docker compose down
docker compose build --no-cache backend telegram-bot
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs telegram-bot --tail=30
docker compose logs backend --tail=30
```

---

## ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/test_notification` –≤ –±–æ—Ç–µ
2. –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏

---

## üìù –ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–¥–ø–∏—Å–∞–Ω—ã:** –ö–Ω–æ–ø–∫–∞ "üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" –≤ –±–æ—Ç–µ
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** `docker compose logs telegram-bot --tail=100`
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ** - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—á–µ–º—É –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

1. ‚ùå **–ù–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã** - –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å "üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"
2. ‚ùå **–ù–µ—Ç —Å–æ–±—ã—Ç–∏–π** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö (–Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ç.–¥.)
3. ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ —Å API** - –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ –ë–î
4. ‚ùå **–ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/test_notification` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏!

