# ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

## üéØ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. ‚úÖ Rate Limiting –¥–ª—è API

**–§–∞–π–ª:** `backend/src/middleware/rateLimit.ts`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ **–û–±—â–∏–π rate limiter** - 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 15 –º–∏–Ω—É—Ç –Ω–∞ IP
- ‚úÖ **Auth rate limiter** - 10 –ø–æ–ø—ã—Ç–æ–∫ –≤ 15 –º–∏–Ω—É—Ç –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ **Create task rate limiter** - 20 –∑–∞–¥–∞–Ω–∏–π –≤ —á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **Message rate limiter** - 50 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ 15 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∫:**
- ‚úÖ –í—Å–µ API endpoints (–æ–±—â–∏–π –ª–∏–º–∏—Ç)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π (`POST /api/tasks`)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (`POST /api/tasks/:id/messages`)
- ‚úÖ SMS rate limiting —É–∂–µ –±—ã–ª (–æ—Å—Ç–∞–≤–ª–µ–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

**–ó–∞—â–∏—Ç–∞:**
- ‚úÖ –û—Ç DDoS –∞—Ç–∞–∫
- ‚úÖ –û—Ç —Å–ø–∞–º–∞
- ‚úÖ –û—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–æ–≤

---

### 2. ‚úÖ –í–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Uptime)

**–£–ª—É—á—à–µ–Ω Health Check Endpoint:** `GET /api/health`

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º latency
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Uptime —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ä–≤–∏—Å–æ–≤

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "status": "ok",
  "timestamp": "2025-12-22T01:42:40.000Z",
  "uptime": 12345.67,
  "version": "1.0.0",
  "checks": {
    "database": {
      "status": "ok",
      "latency": 5
    },
    "environment": {
      "jwtSecret": true,
      "databaseUrl": true,
      "telegramBotToken": true
    }
  }
}
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `MONITORING_SETUP.md`
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ UptimeRobot
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Pingdom
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ StatusCake
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Better Uptime
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ (Email, Telegram, Webhook)

---

### 3. ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã:**

#### `backend/src/routes/auth.test.ts`
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS –∫–æ–¥–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –≤–∞–ª–∏–¥–Ω—ã–º –∫–æ–¥–æ–º
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∏—Å—Ç–µ–∫—à–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS –∫–æ–¥–∞ –¥–ª—è –≤—Ö–æ–¥–∞
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### `backend/src/routes/tasks.test.ts`
- ‚úÖ –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞–Ω–∏–π
- ‚úÖ –¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞–Ω–∏–π –ø–æ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞–º
- ‚úÖ –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ –¢–µ—Å—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–æ–º
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- ‚úÖ –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- ‚úÖ `backend/jest.config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest
- ‚úÖ `backend/package.json` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã:
  - `npm test` - –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
  - `npm run test:watch` - —Ç–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
  - `npm run test:coverage` - —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `jest` - —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- ‚úÖ `@jest/globals` - —Ç–∏–ø—ã Jest
- ‚úÖ `@types/jest` - TypeScript —Ç–∏–ø—ã
- ‚úÖ `@types/supertest` - —Ç–∏–ø—ã –¥–ª—è supertest
- ‚úÖ `supertest` - HTTP assertions
- ‚úÖ `ts-jest` - TypeScript –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è Jest

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:
- ‚úÖ `backend/src/middleware/rateLimit.ts` - Rate limiting middleware
- ‚úÖ `backend/src/routes/auth.test.ts` - –¢–µ—Å—Ç—ã –¥–ª—è auth
- ‚úÖ `backend/src/routes/tasks.test.ts` - –¢–µ—Å—Ç—ã –¥–ª—è tasks
- ‚úÖ `backend/jest.config.js` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest
- ‚úÖ `MONITORING_SETUP.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- ‚úÖ `backend/src/index.ts` - –î–æ–±–∞–≤–ª–µ–Ω rate limiting –∏ —É–ª—É—á—à–µ–Ω health check
- ‚úÖ `backend/src/routes/tasks.ts` - –î–æ–±–∞–≤–ª–µ–Ω rate limiting –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `backend/package.json` - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### Rate Limiting

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:**
- –í—Å–µ API endpoints –∏–º–µ—é—Ç –æ–±—â–∏–π –ª–∏–º–∏—Ç 100 –∑–∞–ø—Ä–æ—Å–æ–≤/15 –º–∏–Ω—É—Ç
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π: 20/—á–∞—Å
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: 50/15 –º–∏–Ω—É—Ç
- SMS: 3/15 –º–∏–Ω—É—Ç (—É–∂–µ –±—ã–ª–æ)

**–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `429 Too Many Requests`
- –í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `Retry-After`
- –°–æ–±—ã—Ç–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ UptimeRobot:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://uptimerobot.com
2. –°–æ–∑–¥–∞–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä —Ç–∏–ø–∞ HTTP(s)
3. URL: `https://send-buddy.ru/api/health`
4. –ò–Ω—Ç–µ—Ä–≤–∞–ª: 5 –º–∏–Ω—É—Ç
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é:**
```bash
curl https://send-buddy.ru/api/health
```

### –¢–µ—Å—Ç—ã

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
cd backend
npm install  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
npm test     # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm run test:watch  # –¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
npm run test:coverage  # –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- Auth routes: –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã
- Tasks routes: –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã
- –ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- ‚úÖ Rate limiting –Ω–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- ‚úÖ Health check endpoint –≥–æ—Ç–æ–≤ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏:
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è Telegram routes
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è Reports routes
3. –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UptimeRobot –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã (Email, Telegram)
3. –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å-–ø–µ–π–¥–∂ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –î–ª—è rate limiting:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ rate limiting (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. –î–æ–±–∞–≤–∏—Ç—å whitelist –¥–ª—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

**–í—Å–µ —Ç—Ä–∏ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã!** ‚úÖ
